<?php
$this->headScript()->setScript("var baseUrl ='{$this->baseUrl()}';", 'text/javascript');
$this->headLink()->prependStylesheet($this->baseUrl() . '/js/tooltipster/css/tooltipster.css');
$this->headScript()->prependFile($this->baseUrl() . '/js/tooltipster/js/jquery.tooltipster.min.js');
$this->headScript()->prependFile($this->baseUrl() . '/js/shop/magieschulen.js');
/* @var $magieschule Shop_Model_Schule */
/* @var $purifier HTMLPurifier */
$purifier = $this->purifier;
?>
<h1>
    Magieschulen
</h1>
<?php
if(count($this->magieschulen) < 1):
?>
<p>
    FÃ¼r deinen Charakter gibt es zur Zeit keine Magieschulen.
</p>
<?php
endif;
$lockedSchools = array();
foreach ($this->magieschulen as $magieschule):
    if($magieschule->getLearned() === false){
        $lockedSchools[] = $magieschule;
        continue;
    }
?>
<fieldset style="margin-bottom: 1.5em">
    <legend>
        <?= $purifier->purify($magieschule->getBezeichnung()) ?>
    </legend>
    <p>
        <?= $purifier->purify($magieschule->getBeschreibung()) ?>
    </p>
    <fieldset>
        <legend class="school" data-id="<?= $magieschule->getId() ?>">Magien dieser Schule anzeigen</legend>
        <div class="subContent"></div>
    </fieldset>
</fieldset>
<?php
endforeach;
foreach ($lockedSchools as $magieschule):
?>
<fieldset style="margin-bottom: 1.5em">
    <legend>
        <?= $purifier->purify($magieschule->getBezeichnung()) ?>
    </legend>
    <p>
        <?= $purifier->purify($magieschule->getBeschreibung()) ?>
    </p>
    <form method="POST" action="<?= $this->baseUrl() ?>/Shop/magie/unlockschool">
        <input type="hidden" value="<?= $magieschule->getId() ?>" name="magieschuleId">
        <input type="submit" value="Magieschule freischalten - 50FP">
    </form>
</fieldset>
<?php
endforeach;
?>