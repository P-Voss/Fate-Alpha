<?php
$this->headScript()->setScript("var baseUrl ='{$this->baseUrl()}';", 'text/javascript');
$this->headLink()->prependStylesheet($this->baseUrl() . '/js/tooltipster/css/tooltipster.css');
$this->headScript()->prependFile($this->baseUrl() . '/js/tooltipster/js/jquery.tooltipster.min.js');
$this->headScript()->prependFile($this->baseUrl() . '/js/shop/magieschulen.js');
/* @var $magieschule Shop_Model_Schule */
/* @var $purifier HTMLPurifier */
$purifier = $this->purifier;
?>
<h1>
    Magieschulen
</h1>
<?php
if(count($this->magieschulen) < 1):
?>
<p>
    FÃ¼r deinen Charakter gibt es zur Zeit keine Magieschulen.
</p>
<?php
endif;
$lockedSchools = array();
foreach ($this->magieschulen as $magieschule):
    if($magieschule->getLearned() === false){
        $lockedSchools[] = $magieschule;
        continue;
    }
?>
<div>
    <p>
        <?= $purifier->purify($magieschule->getBezeichnung()) ?>
    </p>
    <p>
        <?= $purifier->purify($magieschule->getBeschreibung()) ?>
    </p>
    <input type="button" class="school" value="Magien dieser Schule anzeigen" id="<?= $magieschule->getId() ?>">
</div>
<hr />
<?php
endforeach;
foreach ($lockedSchools as $magieschule):
?>
<div>
    <p>
        <?= $purifier->purify($magieschule->getBezeichnung()) ?>
    </p>
    <p>
        <?= $purifier->purify($magieschule->getBeschreibung()) ?>
    </p>
    <form method="POST" action="<?= $this->baseUrl() ?>/Shop/magie/unlockschool">
        <input type="hidden" value="<?= $magieschule->getId() ?>" name="magieschuleId">
        <input type="submit" value="Magieschule freischalten - 50FP">
    </form>
</div>
<hr />
<?php
endforeach;
?>
<div id="dialog"></div>